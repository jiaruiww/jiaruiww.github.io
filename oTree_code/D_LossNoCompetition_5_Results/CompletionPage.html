{% extends "global/Page.html" %}
{% load otree %}

{% block content %}
<style>
    .content-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 50px 30px;
        background-color: #ffffff;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        border-radius: 8px;
    }

    .message {
        font-size: 17px;
        color: #333333;
        line-height: 1.6;
        text-align: center;
        margin-bottom: 25px;
    }

    /* Centered layout for loader and button */
    .action-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin-top: 30px;
    }

    /* Improved loader with smoother animation */
    .loader {
        width: 32px;
        height: 32px;
        border: 3px solid #f5f5f5;
        border-bottom-color: #4d7ef7;
        border-radius: 50%;
        display: inline-block;
        box-sizing: border-box;
        animation: rotation 1.2s linear infinite;
        margin-bottom: 20px;
    }

    @keyframes rotation {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    .manual-link {
        background-color: #4d7ef7;
        color: white;
        font-size: 18px;
        font-weight: 500;
        padding: 12px 30px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        display: inline-block;
        text-decoration: none;
        margin-top: 20px;
        transition: all 0.2s ease;
        box-shadow: 0 2px 5px rgba(77, 126, 247, 0.3);
    }

    .manual-link:hover {
        background-color: #3a68d8;
        text-decoration: none;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(77, 126, 247, 0.4);
    }

    .completion-code {
        font-weight: bold;
        color: #333;
        background-color: #f7f7f7;
        padding: 6px 10px;
        border-radius: 4px;
        border: 1px solid #e0e0e0;
        display: inline-block;
        font-family: monospace;
        font-size: 16px;
    }

    .center-content {
        text-align: center;
    }

    .button-container {
        display: flex;
        justify-content: flex-end;
        margin-top: 35px;
    }

    .otree-btn-next {
        font-size: 18px;
        padding: 10px 25px;
        border-radius: 4px;
    }

    /* Simple checkmark icon */
    .header-image {
        max-width: 70px;
        margin: 0 auto 25px auto;
        display: block;
    }

    .completion-success {
        color: #3a68d8;
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 20px;
    }
</style>

<div class="content-container">
    <div class="center-content">
        <!-- Simple checkmark icon -->
        <svg class="header-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#4d7ef7" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>

        <h2 class="completion-success">Study Completed</h2>

        <p class="message">
            Your responses have been recorded.
            You will be automatically redirected to Prolific in a few seconds.
            If you are not redirected automatically,
            please click the button below or use the completion code:
            <span class="completion-code">{{ prolific_completion_code }}</span>
        </p>

        <div class="action-container">
            <div class="loader"></div>
            <a href="{{ prolific_completion_url }}" class="manual-link">Complete Study on Prolific</a>
        </div>
    </div>
</div>

<script>
    // Redirect to Prolific completion page after 4 seconds
    setTimeout(function() {
        window.location.href = "{{ prolific_completion_url }}";
    }, 4000);
</script>
{% endblock %}